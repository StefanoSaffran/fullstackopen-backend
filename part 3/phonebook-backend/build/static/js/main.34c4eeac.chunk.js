(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},19:function(e,n,t){},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),c=t.n(r),u=(t(19),t(2)),l=(t(20),function(e){var n=e.person,t=e.deleteContact;return o.a.createElement("div",null,n.name," ",n.number," ",o.a.createElement("button",{onClick:function(){return t(n)}},"delete"),o.a.createElement("br",null))}),i=function(e){var n=e.personsToShow,t=e.deleteContact,a=n.map((function(e){return o.a.createElement(l,{key:e.name,person:e,deleteContact:t})}));return o.a.createElement(o.a.Fragment,null,a)},d=function(e){return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{onChange:e.handleFilter}))},m=function(e){var n=e.name,t=e.number,a=e.handleNewName,r=e.handleNewNumber,c=e.addContact;return o.a.createElement("form",{onSubmit:c},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:n,onChange:a})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:t,onChange:r})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.message,t="";return null===n?null:(t="message ".concat(n.type),o.a.createElement("div",{className:t},n.body))},s=t(3),b=t.n(s),h="/api/persons",p={getAll:function(){return b.a.get(h).then((function(e){return e.data}))},addContact:function(e){return b.a.post(h,e).then((function(e){return e.data}))},updateContact:function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},deleteContact:function(e){return b.a.delete("".concat(h,"/").concat(e))}},E=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),l=Object(u.a)(c,2),s=l[0],b=l[1],h=Object(a.useState)(""),E=Object(u.a)(h,2),v=E[0],w=E[1],g=Object(a.useState)(""),y=Object(u.a)(g,2),C=y[0],j=y[1],O=Object(a.useState)(null),N=Object(u.a)(O,2),k=N[0],S=N[1];Object(a.useEffect)((function(){p.getAll().then((function(e){return r(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){setTimeout((function(){S(null)}),5e3)}),[k]);var A=function(e){var n=window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?")),a=t.filter((function(e){return e.name===s})).map((function(e){return e.id}));n?p.updateContact(a,e).then((function(n){r(t.map((function(e){return e.id!==n.id?e:n}))),S({body:"".concat(e.name,"'s number was updated"),type:"info"})})).catch((function(n){r(t.filter((function(n){return n.id!==e.id}))),S({body:"An error has ocurred",type:"error"}),console.log(n)})):alert("The contact was not updated")},T=C?t.filter((function(e){return new RegExp(C,"i").test(e.name)})):t;return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(f,{message:k}),o.a.createElement(d,{handleFilter:function(e){j(e.target.value)}}),o.a.createElement("h2",null,"add a new"),o.a.createElement(m,{name:s,number:v,handleNewName:function(e){b(e.target.value)},handleNewNumber:function(e){w(e.target.value)},addContact:function(e){e.preventDefault();var n={name:s,number:v};t.some((function(e){return e.name===s}))?A(n):p.addContact(n).then((function(e){console.log(e),r(t.concat(n)),S({body:"Added ".concat(n.name),type:"info"})})).catch((function(e){S({body:"An error has ocurred",type:"error"}),console.log(e)})),b(""),w("")}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(i,{personsToShow:T,deleteContact:function(e){var n=window.confirm("Delete ".concat(e.name," ?"));console.log(e),n?p.deleteContact(e.id).then((function(){r(t.filter((function(n){return n.id!==e.id}))),S({body:"Information of '".concat(e.name,"' has been removed from server"),type:"info"})})).catch((function(n){r(t.filter((function(n){return n.id!==e.id}))),S({body:"Information of '".concat(e.name,"' has already been removed from server"),type:"error"}),console.log(n)})):alert("The contact was not deleted")}}))};c.a.render(o.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.34c4eeac.chunk.js.map